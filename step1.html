<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Onboarding - Gabriela Fiona</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- FLOATING INVOICE WIDGET (shared) -->
<div id="floating-widget" class="collapsed">
    <div class="fw-header" onclick="toggleWidget()">
        <span>ESTIMATED TOTAL</span>
        <span id="fw-header-total">$0</span>
    </div>
    <div class="fw-goal" id="fw-goal-display" style="display:none;"></div>
    <div class="fw-content">
        <div id="fw-items">
            <p style="font-size:0.8rem; color:#666; font-style:italic;">Items added will appear here...</p>
        </div>
        <div class="fw-total">
            <span>Total</span>
            <span id="fw-full-total">$0</span>
        </div>
        <div class="fw-deposit">
            50% Deposit: <span id="fw-deposit">$0</span>
        </div>
    </div>
</div>

<!-- PROGRESS BAR -->
<div class="progress-header">
    <div class="progress-bar">
        <div class="progress-line-bg"></div>
        <div class="progress-line-fill" id="progress-fill" style="width:0%;"></div>

        <div class="step-indicator active" id="step-ind-1">
            1 <div class="step-label">Business Goals</div>
        </div>
        <div class="step-indicator" id="step-ind-2">
            2 <div class="step-label">Build Structure</div>
        </div>
        <div class="step-indicator" id="step-ind-3">
            3 <div class="step-label">Action Plan</div>
        </div>
        <div class="step-indicator" id="step-ind-4">
            4 <div class="step-label">Finalize Plan</div>
        </div>
    </div>
</div>

<div class="container">
    <div id="step-1" class="step-section active">

        <div class="welcome-grid">
            <div class="welcome-text">
                <h1>Welcome.</h1>
                <p>We’re going to build your roadmap together. My goal for this call is to get clear on your vision and create a plan that feels simple, strategic, and completely "you."</p>
                <p>No jargon, no confusion—just a clear path forward.</p>
            </div>
            <div class="timeline">
                <div class="timeline-item">
                    <h4>1. The Business Context</h4>
                    <p>Understanding where you are now and where you want to go.</p>
                </div>
                <div class="timeline-item">
                    <h4>2. Scope &amp; Strategy</h4>
                    <p>Selecting the exact features and support you need.</p>
                </div>
                <div class="timeline-item">
                    <h4>3. The Plan</h4>
                    <p>Reviewing the investment and timeline to get us started.</p>
                </div>
            </div>
        </div>

        <hr style="border:0; border-top:1px solid var(--border); margin:40px 0;" />

        <div class="intake-section">
            <div style="margin-bottom:30px;">
                <h2>Client Essentials</h2>
                <p style="font-size:0.9rem; color:var(--text-light); opacity:0.7;">*I've saved your progress automatically. You can fill this out before the call.*</p>
            </div>

            <div class="intake-card">
                <div class="form-grid">
                    <div>
                        <label>Client Name</label>
                        <input type="text" id="clientName" class="save-me" placeholder="Jane Doe">
                    </div>
                    <div>
                        <label>Business / Brand Name</label>
                        <input type="text" id="businessName" class="save-me" placeholder="Studio LLC">
                    </div>
                    <div>
                        <label>Email Address</label>
                        <input type="email" id="clientEmail" class="save-me" placeholder="jane@studio.com">
                    </div>
                    <div>
                        <label>Phone Number</label>
                        <input type="tel" id="clientPhone" class="save-me" placeholder="(555) 123-4567">
                    </div>
                    <div>
                        <label>Current Website URL (If applicable)</label>
                        <input type="text" id="clientUrl" class="save-me" placeholder="www.currentsite.com">
                    </div>
                    <div>
                        <label>Industry</label>
                        <input type="text" id="clientIndustry" class="save-me" placeholder="e.g. Interior Design">
                    </div>
                    <div class="full-width">
                        <label>Main Business Goal</label>
                        <select id="mainGoal" class="save-me goal-tracker">
                            <option value="" disabled selected>Select the primary objective...</option>
                            <option value="Fully custom site + systems">Fully custom site + systems</option>
                            <option value="Professional Design Upgrade">Professional Design Upgrade</option>
                            <option value="Simple Online Presence">Simple Online Presence</option>
                            <option value="Fix/organize current systems">Fix/organize current systems</option>
                        </select>
                    </div>
                    <div class="full-width">
                        <label>Specific Business Objective (Custom)</label>
                        <textarea id="customGoal" rows="3" class="save-me" placeholder="Is there a specific nuance to their goal? (e.g. 'Wants to move away from Etsy to own site')"></textarea>
                    </div>
                </div>
            </div>

            <div class="step-nav-buttons" style="justify-content:flex-end;">
                <button class="btn btn-secondary" type="button" onclick="resetForm()">Reset Form</button>
                <button class="btn btn-primary" type="button" onclick="nextStep(2)">Next: Build Structure &rarr;</button>
            </div>
        </div>

    </div>
</div>

<script src="script.js"></script>
<script>
// STEP 1 – autosave & goal tracker
document.addEventListener('DOMContentLoaded', function () {
    // 1. Bring back any saved intake values
    const inputs = document.querySelectorAll('.save-me');
    inputs.forEach(input => {
        const saved = localStorage.getItem(input.id);
        if (saved !== null) {
            input.value = saved;
        }
        input.addEventListener('input', function () {
            localStorage.setItem(this.id, this.value);
            if (this.classList.contains('goal-tracker')) {
                updateGoalTracker();
            }
        });
    });

    updateGoalTracker();

    // 2. Load shared onboarding state for the widget totals
    if (window.loadState) {
        window.loadState();
    }
    if (window.calculateTotal) {
        window.calculateTotal();
    }
});

function updateGoalTracker() {
    const selectEl = document.getElementById('mainGoal');
    const goalDisplay = document.getElementById('fw-goal-display');
    if (!selectEl || !goalDisplay) return;

    const goal = selectEl.value;
    if (goal) {
        goalDisplay.textContent = 'Goal: ' + goal;
        goalDisplay.style.display = 'block';
        localStorage.setItem('mainGoal', goal);
    } else {
        goalDisplay.style.display = 'none';
        localStorage.removeItem('mainGoal');
    }
}

function resetForm() {
    if (confirm('Are you sure you want to clear all client data and selections?')) {
        localStorage.removeItem('clientName');
        localStorage.removeItem('businessName');
        localStorage.removeItem('clientEmail');
        localStorage.removeItem('clientPhone');
        localStorage.removeItem('clientUrl');
        localStorage.removeItem('clientIndustry');
        localStorage.removeItem('mainGoal');
        localStorage.removeItem('customGoal');
        localStorage.removeItem('onboardingState');
        location.reload();
    }
}
</script>

</body>
</html>
